@page "/autobuses"
@rendermode InteractiveServer
@inject IJSRuntime JSRuntime

<PageTitle>Autobuses</PageTitle>

<h1>Mapa de Autobuses</h1>

<div id="map" style="height: 500px; width: 100%;"></div>

@code {
    private bool mapInitialized = false;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender && !mapInitialized)
        {
            await JSRuntime.InvokeVoidAsync("initializeMap");
            mapInitialized = true;
        }
    }
}

@* Add script references here to ensure they load with the component *@
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
<script src="js/leaflet-init.js"></script>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
<link rel="stylesheet" href="css/map-styles.css" />
